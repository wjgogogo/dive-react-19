# 设计最佳实践

## 布局原则

### 对齐
- 使用 50px 倍数作为间距：50, 100, 150, 200
- 相关元素保持一致的水平/垂直间距

### 流向
- 从左到右：流程/时间
- 从上到下：层次结构
- 图表内箭头方向保持一致

### 尺寸
- 最小：80x60（带文本的形状）
- 标准：120x80（流程框）
- 大型：160x100+（带描述的容器）
- 画布：标准 800x600，复杂 1200x800+

## 配色

### 60-30-10 规则
- 60% 背景/留白
- 30% 主要强调色
- 10% 次要强调

### 项目语义化配色
| 颜色系 | 边框 | 背景 | 用途 |
|--------|------|------|------|
| 紫色 | `#7c3aed` | `#faf5ff` | 核心架构、根节点 |
| 绿色 | `#059669` | `#ecfdf5` | 调度器、正向流程 |
| 蓝色 | `#0ea5e9` | `#f0f9ff` | 数据容器、队列 |
| 青色 | `#0891b2` | `#f0fdff` | 次要元素、辅助 |
| 橙色 | `#ea580c` | `#fff7ed` | 执行阶段、动作 |
| 红色 | `#dc2626` | `#fef2f2` | 重要提示、优先级 |
| 黄色 | `#ca8a04` | `#fefce8` | 工作循环、特殊处理 |
| 靛蓝 | `#6366f1` | `#f5f3ff` | 任务项、组件单元 |

- 文本统一 `#374151`
- 边框统一 `strokeWidth: 2`
- 相同概念在不同图表中使用相同颜色

## 排版

### 字体大小
| 用途 | 大小 |
|------|------|
| 主标题 | 28-36 |
| 节标题 | 24 |
| 框标签 | 20 |
| 描述 | 16 |
| 注释 | 14 |

### 字体选择
- `fontFamily: 5`（ExcalFont）：手写风，默认使用该字体
- `fontFamily: 2`（Helvetica）：专业
- `fontFamily: 3`（Cascadia）：代码、技术标注
- `fontFamily: 1`（Virgil）：仅在明确要求休闲风格时使用

### 容器内文本
- 水平垂直居中
- 每行 2-4 个词
- 用 `\n` 换行

## 箭头

### 类型
| 样式 | 用途 |
|------|------|
| 实线箭头 | 主流程 |
| 虚线箭头 | 响应/异步 |
| 点线箭头 | 引用/依赖 |
| 无箭头线 | 关联/分组 |

### 路由
- 优先水平或垂直
- 复杂路由用 L 形（多点）
- 避免箭头交叉
- 始终绑定到形状

## 常见错误

1. 颜色过多 -- 最多 2-3 种强调色
2. 间距不一致 -- 全局统一间距
3. 文本太小 -- 最小 14px
4. 箭头未标记 -- 复杂流程加标签
5. 布局拥挤 -- 留出空白
6. 形状不一致 -- 相同概念用相同形状
7. 箭头交叉 -- 重新路由避免
8. 绑定关系单向 -- 必须双向维护
