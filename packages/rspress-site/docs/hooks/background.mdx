# Hook èƒŒæ™¯

## æ¦‚è¿°

Hook æ˜¯ React 16.8 å¼•å…¥çš„é©å‘½æ€§ç‰¹æ€§ï¼Œå®ƒå½»åº•æ”¹å˜äº† React ç»„ä»¶çš„ç¼–å†™æ–¹å¼å’ŒçŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚åœ¨ React 19 ä¸­ï¼ŒHook æœºåˆ¶å¾—åˆ°äº†è¿›ä¸€æ­¥å®Œå–„å’Œä¼˜åŒ–ã€‚æœ¬ç« å°†é€šè¿‡å¯æ‰§è¡Œçš„æ¡ˆä¾‹æ·±å…¥æ¢è®¨ Hook çš„è®¾è®¡èƒŒæ™¯ã€è§£å†³çš„é—®é¢˜ï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆæˆä¸ºç°ä»£ React å¼€å‘çš„æ ¸å¿ƒã€‚

## å¯æ‰§è¡Œæ¡ˆä¾‹ï¼šä»ç±»ç»„ä»¶åˆ° Hook çš„æ¼”è¿›

### æ¡ˆä¾‹ 1ï¼šè®¡æ•°å™¨ç»„ä»¶çš„æ¼”è¿›

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨æ¥ç†è§£ Hook è§£å†³çš„å®é™…é—®é¢˜ã€‚

#### ä¼ ç»Ÿç±»ç»„ä»¶å®ç°

```javascript
// åœ¨ packages/react-dojo/dojo/index.jsx ä¸­å°è¯•è¿™ä¸ªä¾‹å­

class ClassCounter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { 
      count: 0,
      message: 'è®¡æ•°å™¨'
    };
    
    // ğŸ’” éœ€è¦æ‰‹åŠ¨ç»‘å®š this
    this.handleClick = this.handleClick.bind(this);
    this.handleReset = this.handleReset.bind(this);
  }
  
  componentDidMount() {
    // ğŸ’” å‰¯ä½œç”¨é€»è¾‘åˆ†æ•£
    document.title = `${this.state.message}: ${this.state.count}`;
    
    // ğŸ’” ç›¸å…³é€»è¾‘è¢«æ‹†åˆ†åˆ°ä¸åŒç”Ÿå‘½å‘¨æœŸ
    this.timer = setInterval(() => {
      console.log(`å½“å‰è®¡æ•°: ${this.state.count}`);
    }, 1000);
  }
  
  componentDidUpdate() {
    // ğŸ’” é‡å¤çš„å‰¯ä½œç”¨é€»è¾‘
    document.title = `${this.state.message}: ${this.state.count}`;
  }
  
  componentWillUnmount() {
    // ğŸ’” æ¸…ç†é€»è¾‘åˆ†ç¦»
    clearInterval(this.timer);
  }
  
  handleClick() {
    // ğŸ’” éœ€è¦ä½¿ç”¨ this.setState
    this.setState(prevState => ({
      count: prevState.count + 1
    }));
  }
  
  handleReset() {
    this.setState({ count: 0 });
  }
  
  render() {
    return (
      <div>
        <h2>{this.state.message}: {this.state.count}</h2>
        <button onClick={this.handleClick}>å¢åŠ </button>
        <button onClick={this.handleReset}>é‡ç½®</button>
      </div>
    );
  }
}
```

#### ç°ä»£ Hook å®ç°

```javascript
// åŒæ ·åœ¨ packages/react-dojo/dojo/index.jsx ä¸­å¯¹æ¯”

function HookCounter() {
  const [count, setCount] = useState(0);
  const [message, setMessage] = useState('è®¡æ•°å™¨');
  
  // âœ… å‰¯ä½œç”¨é€»è¾‘èšåˆåœ¨ä¸€èµ·
  useEffect(() => {
    document.title = `${message}: ${count}`;
  }, [message, count]);
  
  // âœ… ç›¸å…³çš„é€»è¾‘å¯ä»¥ç»„ç»‡åœ¨ä¸€èµ·
  useEffect(() => {
    const timer = setInterval(() => {
      console.log(`å½“å‰è®¡æ•°: ${count}`);
    }, 1000);
    
    // âœ… æ¸…ç†é€»è¾‘å°±åœ¨å‰¯ä½œç”¨æ—è¾¹
    return () => clearInterval(timer);
  }, [count]);
  
  // âœ… ç®€æ´çš„äº‹ä»¶å¤„ç†
  const handleClick = () => setCount(count + 1);
  const handleReset = () => setCount(0);
  
  return (
    <div>
      <h2>{message}: {count}</h2>
      <button onClick={handleClick}>å¢åŠ </button>
      <button onClick={handleReset}>é‡ç½®</button>
      <input 
        value={message} 
        onChange={(e) => setMessage(e.target.value)}
        placeholder="ä¿®æ”¹æ ‡é¢˜"
      />
    </div>
  );
}

// ä½¿ç”¨ç¤ºä¾‹
function App() {
  return (
    <div>
      <h1>ç±»ç»„ä»¶ vs Hook å¯¹æ¯”</h1>
      <div style={{ display: 'flex', gap: '20px' }}>
        <div>
          <h3>ç±»ç»„ä»¶å®ç°</h3>
          <ClassCounter />
        </div>
        <div>
          <h3>Hook å®ç°</h3>
          <HookCounter />
        </div>
      </div>
    </div>
  );
}

export default App;
```

### å·¥ä½œæµç¨‹åˆ†æ

è®©æˆ‘ä»¬æ·±å…¥åˆ†æ Hook çš„å·¥ä½œæµç¨‹ï¼Œç†è§£ä¸ºä»€ä¹ˆå®ƒå¦‚æ­¤å¼ºå¤§ï¼š

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·äº¤äº’
    participant Component as å‡½æ•°ç»„ä»¶
    participant Hook as Hook ç³»ç»Ÿ
    participant Fiber as Fiber èŠ‚ç‚¹
    participant Scheduler as è°ƒåº¦å™¨
    
    User->>Component: ç‚¹å‡»æŒ‰é’®
    Component->>Hook: setCount(count + 1)
    Hook->>Fiber: åˆ›å»ºæ›´æ–°å¯¹è±¡
    Fiber->>Scheduler: è°ƒåº¦æ›´æ–°ä»»åŠ¡
    Scheduler->>Component: é‡æ–°æ‰§è¡Œç»„ä»¶å‡½æ•°
    Component->>Hook: é‡æ–°è°ƒç”¨ useState
    Hook->>Fiber: è®¡ç®—æ–°çŠ¶æ€
    Component->>User: è¿”å›æ–°çš„ JSX
```

### è®¾è®¡ä¼˜åŠ¿åˆ†æ

#### 1. é€»è¾‘èšåˆçš„ä¼˜åŠ¿

```javascript
// âŒ ç±»ç»„ä»¶ï¼šç›¸å…³é€»è¾‘åˆ†æ•£
class UserProfile extends React.Component {
  componentDidMount() {
    this.fetchUserData();      // æ•°æ®è·å–
    this.setupWebSocket();     // WebSocket è¿æ¥
    this.startHeartbeat();     // å¿ƒè·³æ£€æµ‹
  }
  
  componentWillUnmount() {
    this.cleanupWebSocket();   // æ¸…ç†åˆ†æ•£åœ¨å¦ä¸€ä¸ªæ–¹æ³•
    this.stopHeartbeat();      // æ¸…ç†åˆ†æ•£åœ¨å¦ä¸€ä¸ªæ–¹æ³•
  }
  
  componentDidUpdate(prevProps) {
    if (prevProps.userId !== this.props.userId) {
      this.fetchUserData();    // é‡å¤çš„é€»è¾‘
    }
  }
}

// âœ… Hookï¼šç›¸å…³é€»è¾‘èšåˆ
function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  
  // æ•°æ®è·å–é€»è¾‘èšåˆ
  useEffect(() => {
    fetchUserData(userId).then(setUser);
  }, [userId]);
  
  // WebSocket é€»è¾‘èšåˆ
  useEffect(() => {
    const ws = new WebSocket('/api/user-updates');
    ws.onmessage = (event) => {
      const update = JSON.parse(event.data);
      if (update.userId === userId) {
        setUser(update.user);
      }
    };
    
    return () => ws.close(); // æ¸…ç†å°±åœ¨è®¾ç½®çš„æ—è¾¹
  }, [userId]);
  
  // å¿ƒè·³é€»è¾‘èšåˆ
  useEffect(() => {
    const heartbeat = setInterval(() => {
      console.log('ç”¨æˆ·åœ¨çº¿');
    }, 30000);
    
    return () => clearInterval(heartbeat);
  }, []);
}
```

## Hook è¯ç”Ÿçš„èƒŒæ™¯

### ç±»ç»„ä»¶çš„å±€é™æ€§

åœ¨ Hook å‡ºç°ä¹‹å‰ï¼ŒReact ä¸»è¦ä½¿ç”¨ç±»ç»„ä»¶æ¥ç®¡ç†çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸï¼š

```javascript
class Counter extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
    this.handleClick = this.handleClick.bind(this);
  }
  
  componentDidMount() {
    document.title = `Count: ${this.state.count}`;
  }
  
  componentDidUpdate() {
    document.title = `Count: ${this.state.count}`;
  }
  
  handleClick() {
    this.setState({ count: this.state.count + 1 });
  }
  
  render() {
    return (
      <div>
        <p>Count: {this.state.count}</p>
        <button onClick={this.handleClick}>å¢åŠ </button>
      </div>
    );
  }
}
```

#### ç±»ç»„ä»¶å­˜åœ¨çš„é—®é¢˜

1. **å¤æ‚çš„ç»„ä»¶é€»è¾‘**ï¼šçŠ¶æ€é€»è¾‘éš¾ä»¥å¤ç”¨
2. **ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„æ»¥ç”¨**ï¼šç›¸å…³é€»è¾‘åˆ†æ•£åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸä¸­
3. **this ç»‘å®šé—®é¢˜**ï¼šéœ€è¦æ‰‹åŠ¨ç»‘å®šäº‹ä»¶å¤„ç†å™¨
4. **éš¾ä»¥ç†è§£**ï¼šç±»çš„æ¦‚å¿µå¯¹åˆå­¦è€…ä¸å‹å¥½
5. **å·¥å…·é“¾é—®é¢˜**ï¼šå‹ç¼©å·¥å…·å¯¹ç±»çš„ä¼˜åŒ–æ•ˆæœå·®

### å‡½æ•°ç»„ä»¶çš„é™åˆ¶

æ—©æœŸçš„å‡½æ•°ç»„ä»¶åªèƒ½ç”¨äºæ— çŠ¶æ€ç»„ä»¶ï¼š

```javascript
// æ—©æœŸçš„å‡½æ•°ç»„ä»¶åªèƒ½è¿™æ ·å†™
function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

// æ— æ³•ä½¿ç”¨çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸ
```

## React Hook vs Vue 3 Composition API å¯¹æ¯”

åœ¨æ·±å…¥ Hook è®¾è®¡ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹ React Hook å’Œ Vue 3 Composition API çš„ä¸åŒè®¾è®¡å“²å­¦ï¼š

### æ¡ˆä¾‹ 2ï¼šçŠ¶æ€ç®¡ç†å¯¹æ¯”

#### React Hook å®ç°

```javascript
// React Hook æ–¹å¼
function useCounter(initialValue = 0) {
  const [count, setCount] = useState(initialValue);
  const [history, setHistory] = useState([]);
  
  const increment = useCallback(() => {
    setCount(prevCount => {
      const newCount = prevCount + 1;
      setHistory(prev => [...prev, { action: 'increment', value: newCount, time: Date.now() }]);
      return newCount;
    });
  }, []);
  
  const decrement = useCallback(() => {
    setCount(prevCount => {
      const newCount = prevCount - 1;
      setHistory(prev => [...prev, { action: 'decrement', value: newCount, time: Date.now() }]);
      return newCount;
    });
  }, []);
  
  const reset = useCallback(() => {
    setCount(initialValue);
    setHistory(prev => [...prev, { action: 'reset', value: initialValue, time: Date.now() }]);
  }, [initialValue]);
  
  return { count, history, increment, decrement, reset };
}

function ReactCounter() {
  const { count, history, increment, decrement, reset } = useCounter(0);
  
  return (
    <div>
      <h3>React Hook è®¡æ•°å™¨</h3>
      <p>å½“å‰å€¼: {count}</p>
      <button onClick={increment}>+1</button>
      <button onClick={decrement}>-1</button>
      <button onClick={reset}>é‡ç½®</button>
      <details>
        <summary>æ“ä½œå†å² ({history.length})</summary>
        <ul>
          {history.slice(-5).map((item, index) => (
            <li key={index}>
              {item.action}: {item.value} (æ—¶é—´: {new Date(item.time).toLocaleTimeString()})
            </li>
          ))}
        </ul>
      </details>
    </div>
  );
}
```

#### Vue 3 Composition API å®ç°

```javascript
// Vue 3 Composition API æ–¹å¼ (ä»…ç”¨äºå¯¹æ¯”)
import { ref, reactive, computed } from 'vue'

function useCounter(initialValue = 0) {
  const count = ref(initialValue)
  const history = reactive([])
  
  const increment = () => {
    count.value++
    history.push({ action: 'increment', value: count.value, time: Date.now() })
  }
  
  const decrement = () => {
    count.value--
    history.push({ action: 'decrement', value: count.value, time: Date.now() })
  }
  
  const reset = () => {
    count.value = initialValue
    history.push({ action: 'reset', value: initialValue, time: Date.now() })
  }
  
  return { count, history, increment, decrement, reset }
}
```

### è®¾è®¡å“²å­¦å¯¹æ¯”

| ç‰¹æ€§ | React Hook | Vue 3 Composition API | ä¼˜åŠ¿åˆ†æ |
|------|------------|----------------------|----------|
| **çŠ¶æ€æ›´æ–°** | `setState` å‡½æ•°å¼æ›´æ–° | `ref.value` ç›´æ¥èµ‹å€¼ | React æ›´å‡½æ•°å¼ï¼ŒVue æ›´ç›´è§‚ |
| **å“åº”å¼ç³»ç»Ÿ** | ä¾èµ–æ‰‹åŠ¨ä¼˜åŒ– (`useCallback`, `useMemo`) | è‡ªåŠ¨å“åº”å¼è¿½è¸ª | Vue æ›´è‡ªåŠ¨ï¼ŒReact æ›´å¯æ§ |
| **é‡æ–°æ¸²æŸ“** | æ•´ä¸ªç»„ä»¶å‡½æ•°é‡æ–°æ‰§è¡Œ | åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ† | Vue æ€§èƒ½æ›´å¥½ï¼ŒReact æ›´ç®€å• |
| **è°ƒè¯•ä½“éªŒ** | éœ€è¦ç†è§£é—­åŒ…å’Œé‡æ–°æ¸²æŸ“ | çŠ¶æ€å˜åŒ–æ›´å®¹æ˜“è¿½è¸ª | Vue è°ƒè¯•å‹å¥½ï¼ŒReact éœ€è¦æ›´æ·±ç†è§£ |

## Hook çš„è®¾è®¡ç›®æ ‡

Hook çš„è®¾è®¡æ˜¯ä¸ºäº†è§£å†³ä»¥ä¸‹æ ¸å¿ƒé—®é¢˜ï¼š

### 1. ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å›°éš¾

**é—®é¢˜æ¼”ç¤º**ï¼šé«˜é˜¶ç»„ä»¶å’Œ render props ç­‰æ¨¡å¼ä¼šå¯¼è‡´"åŒ…è£…åœ°ç‹±"

```javascript
// âŒ ç±»ç»„ä»¶æ—¶ä»£çš„å¤æ‚åŒ…è£…
function withTheme(Component) {
  return function ThemedComponent(props) {
    return (
      <ThemeContext.Consumer>
        {theme => <Component {...props} theme={theme} />}
      </ThemeContext.Consumer>
    );
  };
}

function withUser(Component) {
  return function UserComponent(props) {
    return (
      <UserContext.Consumer>
        {user => <Component {...props} user={user} />}
      </UserContext.Consumer>
    );
  };
}

// å¤šå±‚åŒ…è£…å¯¼è‡´çš„å¤æ‚æ€§
const EnhancedComponent = withTheme(withUser(withPermission(MyComponent)));

// åœ¨ç»„ä»¶æ ‘ä¸­çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
<ThemeProvider>
  <UserProvider>
    <PermissionProvider>
      <DataProvider>
        <LoadingProvider>
          <ErrorProvider>
            <MyComponent />  {/* çœŸæ­£çš„ç»„ä»¶è¢«æ·±æ·±åµŒå¥— */}
          </ErrorProvider>
        </LoadingProvider>
      </DataProvider>
    </PermissionProvider>
  </UserProvider>
</ThemeProvider>
```

**Hook è§£å†³æ–¹æ¡ˆ**ï¼šçŠ¶æ€é€»è¾‘å¹³é“ºå’Œå¤ç”¨

```javascript
// âœ… ä½¿ç”¨è‡ªå®šä¹‰ Hook ä¼˜é›…åœ°å¤ç”¨é€»è¾‘
function useTheme() {
  const theme = useContext(ThemeContext);
  const toggleTheme = useCallback(() => {
    // ä¸»é¢˜åˆ‡æ¢é€»è¾‘
  }, []);
  return { theme, toggleTheme };
}

function useUser() {
  const user = useContext(UserContext);
  const login = useCallback(async (credentials) => {
    // ç™»å½•é€»è¾‘
  }, []);
  return { user, login };
}

function usePermissions() {
  const { user } = useUser();
  const permissions = useMemo(() => {
    return user ? getUserPermissions(user) : [];
  }, [user]);
  return permissions;
}

// æ¸…æ™°çš„ç»„ä»¶å®ç°
function MyComponent() {
  const { theme, toggleTheme } = useTheme();
  const { user, login } = useUser();
  const permissions = usePermissions();
  
  // æ‰€æœ‰é€»è¾‘éƒ½æ˜¯å¹³é“ºçš„ï¼Œæ²¡æœ‰åµŒå¥—åœ°ç‹±
  return (
    <div className={theme.container}>
      <h1>æ¬¢è¿, {user?.name}</h1>
      <button onClick={toggleTheme}>åˆ‡æ¢ä¸»é¢˜</button>
      {permissions.includes('admin') && <AdminPanel />}
    </div>
  );
}
```

### 2. ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼ŸReact å›¢é˜Ÿçš„è€ƒè™‘

#### è®¾è®¡åŸåˆ™ 1ï¼šç»„åˆä¼˜äºç»§æ‰¿

```javascript
// å¯æ‰§è¡Œæ¡ˆä¾‹ï¼šç»„åˆå¤šä¸ª Hook
function useDataWithCache(url, options = {}) {
  // ç»„åˆå¤šä¸ªåŸºç¡€ Hook
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);
  const cache = useRef(new Map());
  
  const fetchData = useCallback(async () => {
    // æ£€æŸ¥ç¼“å­˜
    if (cache.current.has(url)) {
      setData(cache.current.get(url));
      return;
    }
    
    setLoading(true);
    setError(null);
    
    try {
      const response = await fetch(url, options);
      if (!response.ok) throw new Error(`HTTP ${response.status}`);
      
      const result = await response.json();
      cache.current.set(url, result);
      setData(result);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  }, [url, JSON.stringify(options)]);
  
  useEffect(() => {
    fetchData();
  }, [fetchData]);
  
  const refetch = useCallback(() => {
    cache.current.delete(url);
    fetchData();
  }, [url, fetchData]);
  
  return { data, loading, error, refetch };
}

// è½»æ¾å¤ç”¨å¤æ‚é€»è¾‘
function UserList() {
  const { data: users, loading, error, refetch } = useDataWithCache('/api/users');
  
  if (loading) return <div>åŠ è½½ä¸­...</div>;
  if (error) return <div>é”™è¯¯: {error} <button onClick={refetch}>é‡è¯•</button></div>;
  
  return (
    <div>
      <button onClick={refetch}>åˆ·æ–°ç”¨æˆ·åˆ—è¡¨</button>
      {users?.map(user => <UserCard key={user.id} user={user} />)}
    </div>
  );
}
```

### 2. å¤æ‚ç»„ä»¶éš¾ä»¥ç†è§£

**é—®é¢˜**ï¼šç›¸å…³é€»è¾‘åˆ†æ•£åœ¨ä¸åŒç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­

```javascript
class MyComponent extends React.Component {
  componentDidMount() {
    // è®¾ç½®è®¢é˜…
    this.subscription = subscribeToSomething(this.handleDataChange);
    // è®¾ç½®å®šæ—¶å™¨
    this.timer = setInterval(this.updateTime, 1000);
    // è·å–æ•°æ®
    this.fetchData();
  }
  
  componentWillUnmount() {
    // æ¸…ç†è®¢é˜…
    this.subscription.unsubscribe();
    // æ¸…ç†å®šæ—¶å™¨
    clearInterval(this.timer);
  }
  
  componentDidUpdate(prevProps) {
    // æ£€æŸ¥ props å˜åŒ–
    if (prevProps.id !== this.props.id) {
      this.fetchData();
    }
  }
}
```

**Hook è§£å†³æ–¹æ¡ˆ**ï¼šç›¸å…³é€»è¾‘å¯ä»¥èšåˆåœ¨ä¸€èµ·

```javascript
function MyComponent({ id }) {
  // æ•°æ®è·å–é€»è¾‘
  useEffect(() => {
    fetchData(id);
  }, [id]);
  
  // è®¢é˜…é€»è¾‘
  useEffect(() => {
    const subscription = subscribeToSomething(handleDataChange);
    return () => subscription.unsubscribe();
  }, []);
  
  // å®šæ—¶å™¨é€»è¾‘
  useEffect(() => {
    const timer = setInterval(updateTime, 1000);
    return () => clearInterval(timer);
  }, []);
}
```

### 3. ç±»å¯¹äººå’Œæœºå™¨éƒ½å¾ˆå›°éš¾

**é—®é¢˜**ï¼š
- this ç»‘å®šå¤æ‚
- çƒ­é‡è½½ä¸ç¨³å®š
- ä»£ç å‹ç¼©å›°éš¾
- å­¦ä¹ æ›²çº¿é™¡å³­

**Hook è§£å†³æ–¹æ¡ˆ**ï¼š
- å‡½æ•°æ›´ç®€å•ç›´è§‚
- æ›´å¥½çš„çƒ­é‡è½½æ”¯æŒ
- æ›´å®¹æ˜“è¢«å·¥å…·ä¼˜åŒ–
- å­¦ä¹ æˆæœ¬æ›´ä½

## Hook çš„è®¾è®¡åŸåˆ™

### 1. åªåœ¨æœ€é¡¶å±‚ä½¿ç”¨ Hook

```javascript
// âœ… æ­£ç¡®ï¼šåœ¨é¡¶å±‚è°ƒç”¨
function MyComponent() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState('');
  
  return <div>{count} - {name}</div>;
}

// âŒ é”™è¯¯ï¼šåœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨
function MyComponent() {
  if (someCondition) {
    const [count, setCount] = useState(0); // è¿åè§„åˆ™
  }
}
```

**åŸå› **ï¼šHook ä¾èµ–è°ƒç”¨é¡ºåºæ¥ç»´æŒçŠ¶æ€çš„å¯¹åº”å…³ç³»ã€‚

### 2. åªåœ¨ React å‡½æ•°ä¸­è°ƒç”¨ Hook

```javascript
// âœ… æ­£ç¡®ï¼šåœ¨ React å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨
function MyComponent() {
  const [count, setCount] = useState(0);
}

// âœ… æ­£ç¡®ï¼šåœ¨è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨
function useCounter() {
  const [count, setCount] = useState(0);
  return { count, setCount };
}

// âŒ é”™è¯¯ï¼šåœ¨æ™®é€šå‡½æ•°ä¸­è°ƒç”¨
function regularFunction() {
  const [count, setCount] = useState(0); // è¿åè§„åˆ™
}
```

## Hook çš„å®ç°åŸç†æ¦‚è§ˆ

### åŸºæœ¬æ•°æ®ç»“æ„

Hook åœ¨ React å†…éƒ¨é€šè¿‡é“¾è¡¨ç»“æ„å­˜å‚¨ï¼š

```javascript
// Hook å¯¹è±¡çš„åŸºæœ¬ç»“æ„
const hook = {
  memoizedState: null,    // Hook çš„çŠ¶æ€å€¼
  baseState: null,        // åŸºç¡€çŠ¶æ€
  baseQueue: null,        // åŸºç¡€æ›´æ–°é˜Ÿåˆ—
  queue: null,            // å½“å‰æ›´æ–°é˜Ÿåˆ—
  next: null,             // æŒ‡å‘ä¸‹ä¸€ä¸ª Hook
};
```

### Hook é“¾è¡¨

æ¯ä¸ªå‡½æ•°ç»„ä»¶å¯¹åº”ä¸€ä¸ª Hook é“¾è¡¨ï¼š

```mermaid
graph LR
    A[useState Hook] --> B[useEffect Hook]
    B --> C[useCallback Hook]
    C --> D[useMemo Hook]
    D --> E[null]
```

### è°ƒç”¨æ—¶åº

```javascript
function MyComponent() {
  // ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶åˆ›å»º Hook é“¾è¡¨
  const [count, setCount] = useState(0);     // Hook 1
  const [name, setName] = useState('');      // Hook 2
  
  useEffect(() => {                          // Hook 3
    document.title = `${name}: ${count}`;
  }, [name, count]);
  
  const memoValue = useMemo(() => {          // Hook 4
    return expensiveCalculation(count);
  }, [count]);
  
  return <div>{name} - {count} - {memoValue}</div>;
}
```

## React 19 ä¸­çš„ Hook ä¼˜åŒ–

### æ¡ˆä¾‹ 3ï¼šReact 19 çš„è‡ªåŠ¨æ‰¹å¤„ç†æ¼”ç¤º

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå¯æ‰§è¡Œçš„ä¾‹å­æ¥ç†è§£ React 19 çš„ä¼˜åŒ–ï¼š

```javascript
// åœ¨ packages/react-dojo/dojo/index.jsx ä¸­å°è¯•
function BatchingDemo() {
  const [count, setCount] = useState(0);
  const [name, setName] = useState('é»˜è®¤åç§°');
  const [color, setColor] = useState('blue');
  const renderCount = useRef(0);
  
  // æ¯æ¬¡æ¸²æŸ“æ—¶å¢åŠ è®¡æ•°å™¨
  renderCount.current += 1;
  
  console.log(`BatchingDemo æ¸²æŸ“ç¬¬ ${renderCount.current} æ¬¡`);
  
  const handleMultipleUpdates = () => {
    console.log('=== å¼€å§‹å¤šä¸ªçŠ¶æ€æ›´æ–° ===');
    
    // React 19 ä¼šè‡ªåŠ¨æ‰¹å¤„ç†è¿™äº›æ›´æ–°
    setCount(prev => {
      console.log('æ›´æ–° count:', prev + 1);
      return prev + 1;
    });
    
    setName(prev => {
      console.log('æ›´æ–° name: æ–°åç§°');
      return 'æ–°åç§°';
    });
    
    setColor(prev => {
      console.log('æ›´æ–° color: red');
      return 'red';
    });
    
    console.log('=== çŠ¶æ€æ›´æ–°è°ƒç”¨å®Œæˆ ===');
    // æ³¨æ„ï¼šè¿™é‡Œç»„ä»¶è¿˜æ²¡æœ‰é‡æ–°æ¸²æŸ“
  };
  
  const handleAsyncUpdates = async () => {
    console.log('=== å¼‚æ­¥æ›´æ–°æµ‹è¯• ===');
    
    // å³ä½¿åœ¨å¼‚æ­¥å‡½æ•°ä¸­ï¼ŒReact 19 ä¹Ÿä¼šæ‰¹å¤„ç†
    setTimeout(() => {
      setCount(prev => prev + 10);
      setName('å¼‚æ­¥æ›´æ–°');
      setColor('green');
      console.log('å¼‚æ­¥æ›´æ–°å®Œæˆ');
    }, 100);
  };
  
  return (
    <div style={{ padding: '20px', border: `2px solid ${color}` }}>
      <h3>React 19 æ‰¹å¤„ç†æ¼”ç¤º</h3>
      <p>æ¸²æŸ“æ¬¡æ•°: {renderCount.current}</p>
      <p>è®¡æ•°: {count}</p>
      <p>åç§°: {name}</p>
      <p>é¢œè‰²: {color}</p>
      
      <button onClick={handleMultipleUpdates}>
        åŒæ­¥å¤šä¸ªæ›´æ–° (åº”è¯¥åªæ¸²æŸ“ä¸€æ¬¡)
      </button>
      
      <button onClick={handleAsyncUpdates}>
        å¼‚æ­¥å¤šä¸ªæ›´æ–° (React 19 ä¹Ÿä¼šæ‰¹å¤„ç†)
      </button>
      
      <button onClick={() => {
        // å¯¹æ¯”ï¼šå¦‚æœéœ€è¦å¼ºåˆ¶åŒæ­¥æ›´æ–°
        flushSync(() => {
          setCount(0);
        });
        flushSync(() => {
          setName('å¼ºåˆ¶åŒæ­¥');
        });
        // è¿™ä¼šå¯¼è‡´ä¸¤æ¬¡æ¸²æŸ“
      }}>
        å¼ºåˆ¶åŒæ­¥æ›´æ–° (ä¼šæ¸²æŸ“ä¸¤æ¬¡)
      </button>
    </div>
  );
}
```

### ä¸ºä»€ä¹ˆ React é€‰æ‹©è¿™ç§æ‰¹å¤„ç†ç­–ç•¥ï¼Ÿ

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“æ¬¡æ•°
2. **ä¸€è‡´æ€§**ï¼šç¡®ä¿çŠ¶æ€æ›´æ–°çš„åŸå­æ€§
3. **ç”¨æˆ·ä½“éªŒ**ï¼šé¿å…ç•Œé¢é—ªçƒ

### ä¸ Vue 3 çš„å¯¹æ¯”

```javascript
// Vue 3 çš„å“åº”å¼æ›´æ–°æ˜¯è‡ªåŠ¨çš„
const count = ref(0)
const name = ref('é»˜è®¤åç§°')

// Vue ä¼šè‡ªåŠ¨åˆå¹¶è¿™äº›æ›´æ–°
count.value = 1
name.value = 'æ–°åç§°'
// Vue å†…éƒ¨ä¼šåœ¨ä¸‹ä¸€ä¸ª tick ç»Ÿä¸€æ›´æ–°
```

### 1. è‡ªåŠ¨æ‰¹å¤„ç†çš„æ·±å±‚åŸç†

```javascript
// React 19 å†…éƒ¨çš„æ‰¹å¤„ç†æœºåˆ¶
function batchedUpdates(fn) {
  const prevExecutionContext = executionContext;
  executionContext |= BatchedContext;
  try {
    return fn();
  } finally {
    executionContext = prevExecutionContext;
    if (executionContext === NoContext) {
      // æ‰¹å¤„ç†ç»“æŸï¼Œåˆ·æ–°æ›´æ–°
      flushSyncCallbacks();
    }
  }
}
```

### 2. å¹¶å‘ç‰¹æ€§æ”¯æŒ

```javascript
function MyComponent() {
  const [query, setQuery] = useState('');
  const [results, setResults] = useState([]);
  const [isPending, startTransition] = useTransition();
  
  const handleSearch = (value) => {
    setQuery(value);  // é«˜ä¼˜å…ˆçº§æ›´æ–°
    
    startTransition(() => {
      setResults(search(value));  // ä½ä¼˜å…ˆçº§æ›´æ–°
    });
  };
}
```

### 3. æ–°çš„ Hook

React 19 å¼•å…¥äº†æ–°çš„ Hookï¼š

```javascript
// useDeferredValue - å»¶è¿Ÿå€¼æ›´æ–°
function SearchResults({ query }) {
  const deferredQuery = useDeferredValue(query);
  const results = useMemo(() => search(deferredQuery), [deferredQuery]);
  return <div>{results}</div>;
}

// useId - ç”Ÿæˆå”¯ä¸€ ID
function Form() {
  const id = useId();
  return (
    <div>
      <label htmlFor={id}>Name:</label>
      <input id={id} type="text" />
    </div>
  );
}

// useSyncExternalStore - åŒæ­¥å¤–éƒ¨å­˜å‚¨
function useStore(store) {
  return useSyncExternalStore(
    store.subscribe,
    store.getSnapshot,
    store.getServerSnapshot
  );
}
```

## Hook çš„æ ¸å¿ƒä»·å€¼

### 1. æ›´å¥½çš„ä»£ç å¤ç”¨

```javascript
// è‡ªå®šä¹‰ Hook å°è£…å¤æ‚é€»è¾‘
function useWindowSize() {
  const [size, setSize] = useState({ width: 0, height: 0 });
  
  useEffect(() => {
    const updateSize = () => {
      setSize({ width: window.innerWidth, height: window.innerHeight });
    };
    
    window.addEventListener('resize', updateSize);
    updateSize();
    
    return () => window.removeEventListener('resize', updateSize);
  }, []);
  
  return size;
}

// åœ¨å¤šä¸ªç»„ä»¶ä¸­å¤ç”¨
function Header() {
  const { width } = useWindowSize();
  return <header style={{ width }}>{/* ... */}</header>;
}

function Sidebar() {
  const { width } = useWindowSize();
  return <aside style={{ display: width > 768 ? 'block' : 'none' }}>
    {/* ... */}
  </aside>;
}
```

### 2. æ›´æ¸…æ™°çš„ç»„ä»¶é€»è¾‘

```javascript
function UserProfile({ userId }) {
  // ç”¨æˆ·æ•°æ®é€»è¾‘
  const user = useUser(userId);
  
  // æƒé™é€»è¾‘
  const permissions = usePermissions(user);
  
  // ä¸»é¢˜é€»è¾‘
  const theme = useTheme();
  
  // UI çŠ¶æ€é€»è¾‘
  const [isEditing, setIsEditing] = useState(false);
  
  return (
    <div className={theme.profile}>
      {/* ç»„ä»¶ UI */}
    </div>
  );
}
```

### 3. æ›´å¥½çš„æµ‹è¯•æ€§

```javascript
// Hook å¯ä»¥ç‹¬ç«‹æµ‹è¯•
import { renderHook, act } from '@testing-library/react-hooks';
import { useCounter } from './useCounter';

test('should increment counter', () => {
  const { result } = renderHook(() => useCounter());
  
  act(() => {
    result.current.increment();
  });
  
  expect(result.current.count).toBe(1);
});
```

## æ€§èƒ½è€ƒé‡

### 1. Hook è°ƒç”¨çš„æ€§èƒ½å¼€é”€

Hook è°ƒç”¨æœ¬èº«æœ‰ä¸€å®šçš„æ€§èƒ½å¼€é”€ï¼Œä½†ç›¸æ¯”ç±»ç»„ä»¶çš„ä¼˜åŠ¿æ˜æ˜¾ï¼š

```javascript
// Hook è°ƒç”¨å¼€é”€ä¸»è¦åœ¨äºï¼š
// 1. é“¾è¡¨éå†
// 2. çŠ¶æ€æ¯”è¾ƒ
// 3. å‰¯ä½œç”¨è°ƒåº¦

// ä½†æ¯”ç±»ç»„ä»¶çš„ä¼˜åŠ¿ï¼š
// 1. æ²¡æœ‰å®ä¾‹åˆ›å»ºå¼€é”€
// 2. æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•è°ƒç”¨å¼€é”€
// 3. æ›´å¥½çš„ Tree Shaking
```

### 2. ä¼˜åŒ–å»ºè®®

```javascript
// âœ… ä½¿ç”¨ useCallback ç¼“å­˜å‡½æ•°
const handleClick = useCallback(() => {
  doSomething(param);
}, [param]);

// âœ… ä½¿ç”¨ useMemo ç¼“å­˜è®¡ç®—ç»“æœ
const expensiveValue = useMemo(() => {
  return expensiveCalculation(data);
}, [data]);

// âœ… åˆç†è®¾ç½®ä¾èµ–æ•°ç»„
useEffect(() => {
  fetchData(id);
}, [id]); // åªåœ¨ id å˜åŒ–æ—¶é‡æ–°æ‰§è¡Œ
```

## è°ƒè¯• Hook

### 1. React DevTools

React DevTools æä¾›äº† Hook è°ƒè¯•åŠŸèƒ½ï¼š

- æŸ¥çœ‹ Hook çŠ¶æ€
- ä¿®æ”¹ Hook å€¼
- è·Ÿè¸ª Hook è°ƒç”¨

### 2. è‡ªå®šä¹‰ Hook è°ƒè¯•

```javascript
function useDebugValue(value, format) {
  if (__DEV__) {
    React.useDebugValue(value, format);
  }
}

function useCounter(initialValue) {
  const [count, setCount] = useState(initialValue);
  
  // åœ¨ DevTools ä¸­æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯
  useDebugValue(count > 10 ? 'High' : 'Low');
  
  return { count, setCount };
}
```

## å®é™…è°ƒè¯•æ¡ˆä¾‹ï¼šæ·±å…¥ç†è§£ Hook å·¥ä½œåŸç†

### æ¡ˆä¾‹ 4ï¼šHook çŠ¶æ€æ›´æ–°çš„è°ƒè¯•

```javascript
// åœ¨ packages/react-dojo/dojo/index.jsx ä¸­è®¾ç½®æ–­ç‚¹è°ƒè¯•
function HookDebuggingDemo() {
  const [count, setCount] = useState(0);
  const [multiplier, setMultiplier] = useState(2);
  
  // è®¾ç½®æ–­ç‚¹ï¼Œè§‚å¯Ÿ Hook é“¾è¡¨çš„æ„å»º
  debugger; // æ–­ç‚¹ 1ï¼šè§‚å¯Ÿåˆå§‹åŒ–
  
  const result = useMemo(() => {
    console.log('useMemo é‡æ–°è®¡ç®—:', count, multiplier);
    return count * multiplier;
  }, [count, multiplier]);
  
  const handleIncrement = useCallback(() => {
    debugger; // æ–­ç‚¹ 2ï¼šè§‚å¯ŸçŠ¶æ€æ›´æ–°
    setCount(prevCount => {
      console.log('useState æ›´æ–°:', prevCount, '->', prevCount + 1);
      return prevCount + 1;
    });
  }, []);
  
  useEffect(() => {
    console.log('useEffect æ‰§è¡Œ: count =', count);
    
    // åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­è§‚å¯Ÿï¼š
    // 1. Fiber èŠ‚ç‚¹çš„ memoizedState å±æ€§
    // 2. Hook é“¾è¡¨çš„ç»“æ„
    // 3. æ›´æ–°é˜Ÿåˆ—çš„çŠ¶æ€
    
    const fiber = document.querySelector('#hook-demo')?._reactInternalFiber;
    if (fiber) {
      console.log('Fiber memoizedState:', fiber.memoizedState);
    }
  }, [count]);
  
  return (
    <div id="hook-demo" style={{ padding: '20px', border: '1px solid #ccc' }}>
      <h3>Hook è°ƒè¯•æ¼”ç¤º</h3>
      <p>è®¡æ•°: {count}</p>
      <p>å€æ•°: {multiplier}</p>
      <p>ç»“æœ: {result}</p>
      
      <button onClick={handleIncrement}>å¢åŠ è®¡æ•°</button>
      <button onClick={() => setMultiplier(m => m + 1)}>å¢åŠ å€æ•°</button>
      
      <details>
        <summary>è°ƒè¯•æŒ‡å—</summary>
        <ol>
          <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</li>
          <li>åœ¨ Sources é¢æ¿æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶</li>
          <li>åœ¨ debugger è¯­å¥å¤„è®¾ç½®æ–­ç‚¹</li>
          <li>è§‚å¯Ÿ Call Stack ä¸­çš„ renderWithHooks å‡½æ•°</li>
          <li>åœ¨ Console ä¸­æ‰§è¡Œ $0._reactInternalFiber æŸ¥çœ‹ Fiber èŠ‚ç‚¹</li>
        </ol>
      </details>
    </div>
  );
}
```

### è°ƒè¯•æŠ€å·§æ€»ç»“

1. **ä½¿ç”¨ React DevTools**ï¼šæŸ¥çœ‹ Hook çŠ¶æ€å’Œä¾èµ–
2. **è®¾ç½®æ–­ç‚¹**ï¼šåœ¨å…³é”®çš„ Hook è°ƒç”¨å¤„
3. **è§‚å¯Ÿ Fiber èŠ‚ç‚¹**ï¼šç†è§£ Hook åœ¨å†…å­˜ä¸­çš„å­˜å‚¨
4. **ç›‘æ§æ€§èƒ½**ï¼šä½¿ç”¨ Profiler åˆ†ææ¸²æŸ“æ€§èƒ½

## Hook è®¾è®¡çš„æ ¸å¿ƒä»·å€¼

### 1. å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³

```javascript
// Hook ä½“ç°äº†å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³
const useFormState = (initialState) => {
  const [state, setState] = useState(initialState);
  
  // çº¯å‡½æ•°ï¼šç»™å®šç›¸åŒè¾“å…¥ï¼Œæ€»æ˜¯è¿”å›ç›¸åŒè¾“å‡º
  const updateField = useCallback((field, value) => {
    setState(prev => ({ ...prev, [field]: value }));
  }, []);
  
  // ä¸å¯å˜æ€§ï¼šæ€»æ˜¯è¿”å›æ–°çš„çŠ¶æ€å¯¹è±¡
  const reset = useCallback(() => {
    setState(initialState);
  }, [initialState]);
  
  return { state, updateField, reset };
};
```

### 2. ç»„åˆæ€§å’Œå¯æµ‹è¯•æ€§

```javascript
// Hook çš„ç»„åˆæ€§ä½¿å¾—æµ‹è¯•å˜å¾—ç®€å•
import { renderHook, act } from '@testing-library/react-hooks';

test('useCounter should increment correctly', () => {
  const { result } = renderHook(() => useCounter(5));
  
  expect(result.current.count).toBe(5);
  
  act(() => {
    result.current.increment();
  });
  
  expect(result.current.count).toBe(6);
});
```

### 3. å¿ƒæ™ºæ¨¡å‹çš„ç®€åŒ–

| æ¦‚å¿µ | ç±»ç»„ä»¶ | Hook |
|------|--------|------|
| **çŠ¶æ€ç®¡ç†** | this.setState() | useState() |
| **å‰¯ä½œç”¨** | ç”Ÿå‘½å‘¨æœŸæ–¹æ³• | useEffect() |
| **æ€§èƒ½ä¼˜åŒ–** | shouldComponentUpdate | useMemo/useCallback |
| **é€»è¾‘å¤ç”¨** | HOC/render props | è‡ªå®šä¹‰ Hook |
| **æµ‹è¯•** | éœ€è¦æ¸²æŸ“å®Œæ•´ç»„ä»¶ | å¯ä»¥ç‹¬ç«‹æµ‹è¯•é€»è¾‘ |

## æ€»ç»“ï¼šä¸ºä»€ä¹ˆ Hook æ˜¯ React çš„æœªæ¥

Hook çš„å¼•å…¥ä¸ä»…ä»…æ˜¯ API çš„æ”¹å˜ï¼Œæ›´æ˜¯ç¼–ç¨‹èŒƒå¼çš„è½¬å˜ï¼š

### 1. è§£å†³äº†æ ¹æœ¬æ€§é—®é¢˜
- **çŠ¶æ€é€»è¾‘å¤ç”¨å›°éš¾** â†’ è‡ªå®šä¹‰ Hook è½»æ¾å¤ç”¨
- **å¤æ‚ç»„ä»¶éš¾ä»¥ç†è§£** â†’ ç›¸å…³é€»è¾‘èšåˆ
- **ç±»ç»„ä»¶å­¦ä¹ æ›²çº¿é™¡å³­** â†’ å‡½æ•°å¼ç¼–ç¨‹æ›´ç›´è§‚

### 2. å¸¦æ¥äº†æ–°çš„å¯èƒ½æ€§
- **å¹¶å‘ç‰¹æ€§**ï¼šuseTransitionã€useDeferredValue
- **æœåŠ¡ç«¯æ¸²æŸ“**ï¼šæ›´å¥½çš„ SSR æ”¯æŒ
- **å¼€å‘å·¥å…·**ï¼šæ›´ä¸°å¯Œçš„è°ƒè¯•ä¿¡æ¯

### 3. ä¸ç°ä»£å‰ç«¯è¶‹åŠ¿å¯¹é½
- **å‡½æ•°å¼ç¼–ç¨‹**ï¼šæ›´ç¬¦åˆç°ä»£ JavaScript å‘å±•è¶‹åŠ¿
- **TypeScript å‹å¥½**ï¼šæ›´å¥½çš„ç±»å‹æ¨å¯¼
- **å·¥å…·é“¾ä¼˜åŒ–**ï¼šTree shakingã€å‹ç¼©æ•ˆæœæ›´å¥½

### 4. React 19 çš„è¿›ä¸€æ­¥ä¼˜åŒ–
- **è‡ªåŠ¨æ‰¹å¤„ç†**ï¼šæ›´å¥½çš„æ€§èƒ½
- **å¹¶å‘æ¸²æŸ“**ï¼šæ›´æµç•…çš„ç”¨æˆ·ä½“éªŒ
- **æ”¹è¿›çš„ DevTools**ï¼šæ›´å¼ºå¤§çš„è°ƒè¯•èƒ½åŠ›

Hook ä¸åªæ˜¯ React çš„ç‰¹æ€§ï¼Œå®ƒä»£è¡¨äº†ç°ä»£ç»„ä»¶å¼€å‘çš„æœ€ä½³å®è·µã€‚ç†è§£ Hook çš„è®¾è®¡å“²å­¦å’Œå®ç°åŸç†ï¼Œæ˜¯æŒæ¡ç°ä»£ React å¼€å‘çš„å…³é”®ã€‚

### ä¸å…¶ä»–æ¡†æ¶çš„å¯¹æ¯”

| ç‰¹æ€§ | React Hook | Vue 3 Composition API | Svelte |
|------|------------|----------------------|--------|
| **å­¦ä¹ æ›²çº¿** | ä¸­ç­‰ï¼ˆéœ€ç†è§£é—­åŒ…ï¼‰ | ç®€å•ï¼ˆå“åº”å¼ç›´è§‚ï¼‰ | ç®€å•ï¼ˆç¼–è¯‘æ—¶ä¼˜åŒ–ï¼‰ |
| **æ€§èƒ½** | éœ€æ‰‹åŠ¨ä¼˜åŒ– | è‡ªåŠ¨å“åº”å¼è¿½è¸ª | ç¼–è¯‘æ—¶ä¼˜åŒ– |
| **ç”Ÿæ€ç³»ç»Ÿ** | æœ€ä¸°å¯Œ | å¿«é€Ÿå‘å±• | æ–°å…´ä½†æ´»è·ƒ |
| **TypeScript** | ä¼˜ç§€ | ä¼˜ç§€ | è‰¯å¥½ |

Hook çš„è®¾è®¡ä½“ç°äº† React å›¢é˜Ÿå¯¹äºç»„ä»¶æ¶æ„çš„æ·±åº¦æ€è€ƒï¼Œå®ƒä¸ä»…è§£å†³äº†è¿‡å»çš„é—®é¢˜ï¼Œä¹Ÿä¸ºæœªæ¥çš„å‘å±•å¥ å®šäº†åŸºç¡€ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ Hook çš„åˆ†ç±»å’Œå…·ä½“å®ç°ç»†èŠ‚ã€‚